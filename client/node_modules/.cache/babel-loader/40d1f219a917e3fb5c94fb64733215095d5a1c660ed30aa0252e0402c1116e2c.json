{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hrushi/Desktop/notenexus/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/hrushi/Desktop/notenexus/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/hrushi/Desktop/notenexus/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Layout from\"../../components/Layout\";import axios from\"axios\";import{Button,Card,Form}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import{deleteNoteAction,updateNoteAction}from\"../../actions/notesActions\";import ErrorMessage from\"../../components/ErrorMessage\";import Loader from\"../../components/Loader\";import ReactMarkdown from\"react-markdown\";import{useParams,useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SingleNote(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),category=_useState6[0],setCategory=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),date=_useState8[0],setDate=_useState8[1];var navigate=useNavigate();var _useParams=useParams(),id=_useParams.id;var dispatch=useDispatch();var noteUpdate=useSelector(function(state){return state.noteUpdate;});var loading=noteUpdate.loading,error=noteUpdate.error;var noteDelete=useSelector(function(state){return state.noteDelete;});var loadingDelete=noteDelete.loading,errorDelete=noteDelete.error;var deleteHandler=function deleteHandler(id){if(window.confirm(\"Are you sure?\")){dispatch(deleteNoteAction(id));}navigate(\"/mynotes\");};useEffect(function(){var fetching=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/notes/\".concat(id));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setTitle(data.title);setContent(data.content);setCategory(data.category);setDate(data.updatedAt);case 8:case\"end\":return _context.stop();}},_callee);}));return function fetching(){return _ref.apply(this,arguments);};}();fetching();},[id,date]);var resetHandler=function resetHandler(){setTitle(\"\");setCategory(\"\");setContent(\"\");};var updateHandler=function updateHandler(e){e.preventDefault();dispatch(updateNoteAction(id,title,content,category));if(!title||!content||!category)return;resetHandler();navigate(\"/mynotes\");};return/*#__PURE__*/_jsx(Layout,{title:\"Edit Note\",children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Edit your Note\"}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:updateHandler,children:[loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),error&&/*#__PURE__*/_jsx(ErrorMessage,{variant:\"danger\",children:error}),errorDelete&&/*#__PURE__*/_jsx(ErrorMessage,{variant:\"danger\",children:errorDelete}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"title\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Title\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"title\",placeholder:\"Enter the title\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"content\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Content\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",placeholder:\"Enter the content\",rows:4,value:content,onChange:function onChange(e){return setContent(e.target.value);}})]}),content&&/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{children:\"Note Preview\"}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsx(ReactMarkdown,{children:content})})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"content\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Category\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"content\",placeholder:\"Enter the Category\",value:category,onChange:function onChange(e){return setCategory(e.target.value);}})]}),loading&&/*#__PURE__*/_jsx(Loader,{size:50}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"Update Note\"}),/*#__PURE__*/_jsx(Button,{className:\"mx-2\",variant:\"danger\",onClick:function onClick(){return deleteHandler(id);},children:\"Delete Note\"})]})}),/*#__PURE__*/_jsxs(Card.Footer,{className:\"text-muted\",children:[\"Updated on - \",date.substring(0,10)]})]})});}export default SingleNote;","map":{"version":3,"names":["React","useEffect","useState","Layout","axios","Button","Card","Form","useDispatch","useSelector","deleteNoteAction","updateNoteAction","ErrorMessage","Loader","ReactMarkdown","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","SingleNote","_useState","_useState2","_slicedToArray","title","setTitle","_useState3","_useState4","content","setContent","_useState5","_useState6","category","setCategory","_useState7","_useState8","date","setDate","navigate","_useParams","id","dispatch","noteUpdate","state","loading","error","noteDelete","loadingDelete","errorDelete","deleteHandler","window","confirm","fetching","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","data","wrap","_callee$","_context","prev","next","get","concat","sent","updatedAt","stop","apply","arguments","resetHandler","updateHandler","e","preventDefault","children","Header","Body","onSubmit","variant","Group","controlId","Label","Control","type","placeholder","value","onChange","target","as","rows","size","className","onClick","Footer","substring"],"sources":["/Users/hrushi/Desktop/notenexus/client/src/pages/SingleNote/SingleNote.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport axios from \"axios\";\nimport { Button, Card, Form } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { deleteNoteAction, updateNoteAction } from \"../../actions/notesActions\";\nimport ErrorMessage from \"../../components/ErrorMessage\";\nimport Loader from \"../../components/Loader\";\nimport ReactMarkdown from \"react-markdown\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nfunction SingleNote() {\n  const [title, setTitle] = useState();\n  const [content, setContent] = useState();\n  const [category, setCategory] = useState();\n  const [date, setDate] = useState(\"\");\n  const navigate = useNavigate();\n  const { id } = useParams();\n  const dispatch = useDispatch();\n\n  const noteUpdate = useSelector((state) => state.noteUpdate);\n  const { loading, error } = noteUpdate;\n\n  const noteDelete = useSelector((state) => state.noteDelete);\n  const { loading: loadingDelete, error: errorDelete } = noteDelete;\n\n  const deleteHandler = (id) => {\n    if (window.confirm(\"Are you sure?\")) {\n      dispatch(deleteNoteAction(id));\n    }\n    navigate(\"/mynotes\");\n  };\n\n  useEffect(() => {\n    const fetching = async () => {\n      const { data } = await axios.get(`/api/notes/${id}`);\n\n      setTitle(data.title);\n      setContent(data.content);\n      setCategory(data.category);\n      setDate(data.updatedAt);\n    };\n\n    fetching();\n  }, [id, date]);\n\n  const resetHandler = () => {\n    setTitle(\"\");\n    setCategory(\"\");\n    setContent(\"\");\n  };\n\n  const updateHandler = (e) => {\n    e.preventDefault();\n    dispatch(updateNoteAction(id, title, content, category));\n    if (!title || !content || !category) return;\n\n    resetHandler();\n    navigate(\"/mynotes\");\n  };\n\n  return (\n    <Layout title=\"Edit Note\">\n      <Card>\n        <Card.Header>Edit your Note</Card.Header>\n        <Card.Body>\n          <Form onSubmit={updateHandler}>\n            {loadingDelete && <Loader />}\n            {error && <ErrorMessage variant=\"danger\">{error}</ErrorMessage>}\n            {errorDelete && (\n              <ErrorMessage variant=\"danger\">{errorDelete}</ErrorMessage>\n            )}\n            <Form.Group controlId=\"title\">\n              <Form.Label>Title</Form.Label>\n              <Form.Control\n                type=\"title\"\n                placeholder=\"Enter the title\"\n                value={title}\n                onChange={(e) => setTitle(e.target.value)}\n              />\n            </Form.Group>\n\n            <Form.Group controlId=\"content\">\n              <Form.Label>Content</Form.Label>\n              <Form.Control\n                as=\"textarea\"\n                placeholder=\"Enter the content\"\n                rows={4}\n                value={content}\n                onChange={(e) => setContent(e.target.value)}\n              />\n            </Form.Group>\n            {content && (\n              <Card>\n                <Card.Header>Note Preview</Card.Header>\n                <Card.Body>\n                  <ReactMarkdown>{content}</ReactMarkdown>\n                </Card.Body>\n              </Card>\n            )}\n\n            <Form.Group controlId=\"content\">\n              <Form.Label>Category</Form.Label>\n              <Form.Control\n                type=\"content\"\n                placeholder=\"Enter the Category\"\n                value={category}\n                onChange={(e) => setCategory(e.target.value)}\n              />\n            </Form.Group>\n            {loading && <Loader size={50} />}\n            <Button variant=\"primary\" type=\"submit\">\n              Update Note\n            </Button>\n            <Button\n              className=\"mx-2\"\n              variant=\"danger\"\n              onClick={() => deleteHandler(id)}\n            >\n              Delete Note\n            </Button>\n          </Form>\n        </Card.Body>\n\n        <Card.Footer className=\"text-muted\">\n          Updated on - {date.substring(0, 10)}\n        </Card.Footer>\n      </Card>\n    </Layout>\n  );\n}\n\nexport default SingleNote;\n"],"mappings":"oYAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,MAAM,KAAM,yBAAyB,CAC5C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,MAAM,CAAEC,IAAI,CAAEC,IAAI,KAAQ,iBAAiB,CACpD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,gBAAgB,CAAEC,gBAAgB,KAAQ,4BAA4B,CAC/E,MAAO,CAAAC,YAAY,KAAM,+BAA+B,CACxD,MAAO,CAAAC,MAAM,KAAM,yBAAyB,CAC5C,MAAO,CAAAC,aAAa,KAAM,gBAAgB,CAC1C,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAC1D,QAAS,CAAAC,UAAUA,CAAA,CAAG,CACpB,IAAAC,SAAA,CAA0BpB,QAAQ,EAAE,CAAAqB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtB,IAAAI,UAAA,CAA8BzB,QAAQ,EAAE,CAAA0B,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAjCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,UAAA,CAAgC7B,QAAQ,EAAE,CAAA8B,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAnCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAC5B,IAAAG,UAAA,CAAwBjC,QAAQ,CAAC,EAAE,CAAC,CAAAkC,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAA7BE,IAAI,CAAAD,UAAA,IAAEE,OAAO,CAAAF,UAAA,IACpB,GAAM,CAAAG,QAAQ,CAAGvB,WAAW,EAAE,CAC9B,IAAAwB,UAAA,CAAezB,SAAS,EAAE,CAAlB0B,EAAE,CAAAD,UAAA,CAAFC,EAAE,CACV,GAAM,CAAAC,QAAQ,CAAGlC,WAAW,EAAE,CAE9B,GAAM,CAAAmC,UAAU,CAAGlC,WAAW,CAAC,SAACmC,KAAK,QAAK,CAAAA,KAAK,CAACD,UAAU,GAAC,CAC3D,GAAQ,CAAAE,OAAO,CAAYF,UAAU,CAA7BE,OAAO,CAAEC,KAAK,CAAKH,UAAU,CAApBG,KAAK,CAEtB,GAAM,CAAAC,UAAU,CAAGtC,WAAW,CAAC,SAACmC,KAAK,QAAK,CAAAA,KAAK,CAACG,UAAU,GAAC,CAC3D,GAAiB,CAAAC,aAAa,CAAyBD,UAAU,CAAzDF,OAAO,CAAwBI,WAAW,CAAKF,UAAU,CAAjCD,KAAK,CAErC,GAAM,CAAAI,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIT,EAAE,CAAK,CAC5B,GAAIU,MAAM,CAACC,OAAO,CAAC,eAAe,CAAC,CAAE,CACnCV,QAAQ,CAAChC,gBAAgB,CAAC+B,EAAE,CAAC,CAAC,CAChC,CACAF,QAAQ,CAAC,UAAU,CAAC,CACtB,CAAC,CAEDtC,SAAS,CAAC,UAAM,CACd,GAAM,CAAAoD,QAAQ,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,gBAAA,CAAAC,IAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACQ,CAAA7D,KAAK,CAAC8D,GAAG,eAAAC,MAAA,CAAe1B,EAAE,EAAG,QAAAkB,gBAAA,CAAAI,QAAA,CAAAK,IAAA,CAA5CR,IAAI,CAAAD,gBAAA,CAAJC,IAAI,CAEZlC,QAAQ,CAACkC,IAAI,CAACnC,KAAK,CAAC,CACpBK,UAAU,CAAC8B,IAAI,CAAC/B,OAAO,CAAC,CACxBK,WAAW,CAAC0B,IAAI,CAAC3B,QAAQ,CAAC,CAC1BK,OAAO,CAACsB,IAAI,CAACS,SAAS,CAAC,CAAC,wBAAAN,QAAA,CAAAO,IAAA,MAAAZ,OAAA,GACzB,kBAPK,CAAAL,QAAQA,CAAA,SAAAC,IAAA,CAAAiB,KAAA,MAAAC,SAAA,OAOb,CAEDnB,QAAQ,EAAE,CACZ,CAAC,CAAE,CAACZ,EAAE,CAAEJ,IAAI,CAAC,CAAC,CAEd,GAAM,CAAAoC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzB/C,QAAQ,CAAC,EAAE,CAAC,CACZQ,WAAW,CAAC,EAAE,CAAC,CACfJ,UAAU,CAAC,EAAE,CAAC,CAChB,CAAC,CAED,GAAM,CAAA4C,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,CAAC,CAAK,CAC3BA,CAAC,CAACC,cAAc,EAAE,CAClBlC,QAAQ,CAAC/B,gBAAgB,CAAC8B,EAAE,CAAEhB,KAAK,CAAEI,OAAO,CAAEI,QAAQ,CAAC,CAAC,CACxD,GAAI,CAACR,KAAK,EAAI,CAACI,OAAO,EAAI,CAACI,QAAQ,CAAE,OAErCwC,YAAY,EAAE,CACdlC,QAAQ,CAAC,UAAU,CAAC,CACtB,CAAC,CAED,mBACErB,IAAA,CAACf,MAAM,EAACsB,KAAK,CAAC,WAAW,CAAAoD,QAAA,cACvBzD,KAAA,CAACd,IAAI,EAAAuE,QAAA,eACH3D,IAAA,CAACZ,IAAI,CAACwE,MAAM,EAAAD,QAAA,CAAC,gBAAc,EAAc,cACzC3D,IAAA,CAACZ,IAAI,CAACyE,IAAI,EAAAF,QAAA,cACRzD,KAAA,CAACb,IAAI,EAACyE,QAAQ,CAAEN,aAAc,CAAAG,QAAA,EAC3B7B,aAAa,eAAI9B,IAAA,CAACL,MAAM,IAAG,CAC3BiC,KAAK,eAAI5B,IAAA,CAACN,YAAY,EAACqE,OAAO,CAAC,QAAQ,CAAAJ,QAAA,CAAE/B,KAAK,EAAgB,CAC9DG,WAAW,eACV/B,IAAA,CAACN,YAAY,EAACqE,OAAO,CAAC,QAAQ,CAAAJ,QAAA,CAAE5B,WAAW,EAC5C,cACD7B,KAAA,CAACb,IAAI,CAAC2E,KAAK,EAACC,SAAS,CAAC,OAAO,CAAAN,QAAA,eAC3B3D,IAAA,CAACX,IAAI,CAAC6E,KAAK,EAAAP,QAAA,CAAC,OAAK,EAAa,cAC9B3D,IAAA,CAACX,IAAI,CAAC8E,OAAO,EACXC,IAAI,CAAC,OAAO,CACZC,WAAW,CAAC,iBAAiB,CAC7BC,KAAK,CAAE/D,KAAM,CACbgE,QAAQ,CAAE,SAAAA,SAACd,CAAC,QAAK,CAAAjD,QAAQ,CAACiD,CAAC,CAACe,MAAM,CAACF,KAAK,CAAC,EAAC,EAC1C,GACS,cAEbpE,KAAA,CAACb,IAAI,CAAC2E,KAAK,EAACC,SAAS,CAAC,SAAS,CAAAN,QAAA,eAC7B3D,IAAA,CAACX,IAAI,CAAC6E,KAAK,EAAAP,QAAA,CAAC,SAAO,EAAa,cAChC3D,IAAA,CAACX,IAAI,CAAC8E,OAAO,EACXM,EAAE,CAAC,UAAU,CACbJ,WAAW,CAAC,mBAAmB,CAC/BK,IAAI,CAAE,CAAE,CACRJ,KAAK,CAAE3D,OAAQ,CACf4D,QAAQ,CAAE,SAAAA,SAACd,CAAC,QAAK,CAAA7C,UAAU,CAAC6C,CAAC,CAACe,MAAM,CAACF,KAAK,CAAC,EAAC,EAC5C,GACS,CACZ3D,OAAO,eACNT,KAAA,CAACd,IAAI,EAAAuE,QAAA,eACH3D,IAAA,CAACZ,IAAI,CAACwE,MAAM,EAAAD,QAAA,CAAC,cAAY,EAAc,cACvC3D,IAAA,CAACZ,IAAI,CAACyE,IAAI,EAAAF,QAAA,cACR3D,IAAA,CAACJ,aAAa,EAAA+D,QAAA,CAAEhD,OAAO,EAAiB,EAC9B,GAEf,cAEDT,KAAA,CAACb,IAAI,CAAC2E,KAAK,EAACC,SAAS,CAAC,SAAS,CAAAN,QAAA,eAC7B3D,IAAA,CAACX,IAAI,CAAC6E,KAAK,EAAAP,QAAA,CAAC,UAAQ,EAAa,cACjC3D,IAAA,CAACX,IAAI,CAAC8E,OAAO,EACXC,IAAI,CAAC,SAAS,CACdC,WAAW,CAAC,oBAAoB,CAChCC,KAAK,CAAEvD,QAAS,CAChBwD,QAAQ,CAAE,SAAAA,SAACd,CAAC,QAAK,CAAAzC,WAAW,CAACyC,CAAC,CAACe,MAAM,CAACF,KAAK,CAAC,EAAC,EAC7C,GACS,CACZ3C,OAAO,eAAI3B,IAAA,CAACL,MAAM,EAACgF,IAAI,CAAE,EAAG,EAAG,cAChC3E,IAAA,CAACb,MAAM,EAAC4E,OAAO,CAAC,SAAS,CAACK,IAAI,CAAC,QAAQ,CAAAT,QAAA,CAAC,aAExC,EAAS,cACT3D,IAAA,CAACb,MAAM,EACLyF,SAAS,CAAC,MAAM,CAChBb,OAAO,CAAC,QAAQ,CAChBc,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA7C,aAAa,CAACT,EAAE,CAAC,EAAC,CAAAoC,QAAA,CAClC,aAED,EAAS,GACJ,EACG,cAEZzD,KAAA,CAACd,IAAI,CAAC0F,MAAM,EAACF,SAAS,CAAC,YAAY,CAAAjB,QAAA,EAAC,eACrB,CAACxC,IAAI,CAAC4D,SAAS,CAAC,CAAC,CAAE,EAAE,CAAC,GACvB,GACT,EACA,CAEb,CAEA,cAAe,CAAA5E,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}